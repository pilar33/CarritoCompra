{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="row p-2">
    <div class="col">
      <div class="card text-center">
          <div class="card-header">
              <h1 class="card-title">{{ title }} </h1>
          </div>
      </div>
    </div>
</div>
<div class="row mb-2">
    {% include 'navbar.html' %}
</div>

   
<div class="container mt-5">
    <h1>Listado de Sucursales</h1>
    <button id="addSucursalesBtn" class="btn btn-primary mb-3">Agregar Sucursal</button>
    <table id="tblSucursales" class="table table-striped table-bordered" style="width:100%">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody>
            <!-- Los datos se llenarán dinámicamente con DataTables -->
        </tbody>
    </table>
</div>

{% endblock content %}
{% block javascript %}
<script type="text/javascript" src="{% static 'js/sucursales.js' %}"></script>
<script>
    $(document).ready(function() {
            $('#tblSucursales').DataTable({
                "ajax": {
                    "url": "{% url 'api_sucursales' %}",
                    "dataSrc": "data"
                },
                "columns": [
                    { "data": "iidsucursal" },
                    { "data": "snombre" },
                    { "data": "iidestado" }

                ]
            });
        });
   

        $('#addSucursalesBtn').click(function() {
                openFormModal("{% url 'sucursales_add' %}");
        });

        $('#clientesTable tbody').on('click', '.editClienteBtn', function() {
                var url = $(this).data('url');
                openFormModal(url);
            });

        $('#clientesTable tbody').on('click', '.deleteClienteBtn', function() {
            var url = $(this).data('url');
            openDeleteModal(url);
        });
   </script>
{% endblock javascript %}